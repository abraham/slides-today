<main class='mdc-layout-grid'>
  <div *ngIf="deck$ | async as deck; else loading" class="mdc-layout-grid__inner">

    <div class="deck-content mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
      <div class="mdc-layout-grid__inner">

        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4-mobile mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-6-desktop">
          <div #detailsEl class="item details mdc-card">
            <section class="card__primary">
              <h1 class="card__title mdc-typography--headline4">{{deck.title}}</h1>
              <h2 class="card__subtitle mdc-typography--subtitle1">{{deck.eventTitle}} Â· {{deck.date}}</h2>
            </section>
            <section class="card__secondary mdc-typography--body1">
              {{deck.description}}
            </section>
            <section class="card__secondary">
              <app-tags [currentTags]="deck.tags"></app-tags>
            </section>
            <section class="mdc-card__actions">
              <a *ngFor="let link of deck.links"
                appRipple
                [href]="link.url"
                target="_blank"
                rel="noopener"
                class="mdc-button mdc-card__action mdc-card__action--button">
                <span class="mdc-button__ripple"></span> {{link.title}}
              </a>
            </section>
          </div>

          <ng-template ngFor let-embed [ngForOf]="embeds">
            <div class="item">
              <app-embed [width]="embedWidth" [link]="embed" [title]="deck.title" [theme]="deck.theme"></app-embed>
            </div>
          </ng-template>

          <ng-template ngFor let-speakerId [ngForOf]="deck.speakerIds">
            <div class="item">
              <app-speaker [speakerId]="speakerId"></app-speaker>
            </div>
          </ng-template>

          <div class="item" *ngIf="deck">
            <div class="mdc-card">
              <section class="card__primary">
                <h2 class="card__title mdc-typography--headline6">{{deck.location}}</h2>
              </section>
              <app-map [location]="deck.location"></app-map>
            </div>
          </div>

          <div class="item" *ngIf="deck && deck.sponsorIds.length">
            <app-sponsor [sponsorIds]="deck.sponsorIds"></app-sponsor>
          </div>

          <div class="item" *ngIf="deck.resources.length > 0">
            <app-deck-resources [resources]="deck.resources"></app-deck-resources>
          </div>

        </div>
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4-mobile mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-6-desktop">

          <ng-template ngFor let-github [ngForOf]="deck.githubRepos">
            <github-repository class="item" [attr.owner-repo]="github"></github-repository>
          </ng-template>

          <ng-template ngFor let-name [ngForOf]="deck.nodePackages">
            <node-package class="item" [attr.name]="name"></node-package>
          </ng-template>

          <ng-template ngFor let-status [ngForOf]="deck.tweets | async">
            <twitter-status class="item" [status]="status"></twitter-status>
          </ng-template>

        </div>
      </div>
    </div>
  </div>

  <ng-template #loading>
    Loading...
  </ng-template>
</main>
